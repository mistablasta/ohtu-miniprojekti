{% extends "layout.html" %}

{% block body %}
<h2>Edit Entry</h2>

<form action="/update_entry/{{ entry.id }}" method="post">
    {% set entry_type = entry.type %}

    <input type="hidden" name="type" value="{{ entry_type.name.lower() }}">

    <h2>Edit {{ entry_type.name.lower() }}</h2>

    {% for field, value in entry.fields.items() %}
        {% set required = field in entry_type.get_metadata().required_fields %}

        <div>
            <label>{{ field.lower().capitalize() }}{{ '*' if required }}:</label>
            <input
                type="text"
                name="{{ field }}"
                value="{{ value }}"
                {{ "required" if required }}>
        </div>

    {% endfor %}
    
    <div>
        <label>Tags:</label>
        <input
           type="text"
           name="tags"
           value="{{ entry.get_tags() }}"
           placeholder="Tag 1, Tag 2, ..."
        >
        {% if all_tags %}
            <p>Existing tags: {{ all_tags | join(', ') }}</p>
        {% endif %}
    </div>

    <button type="submit">Save</button>
    <a href="/">Cancel</a>

</form>
{% endblock %}
